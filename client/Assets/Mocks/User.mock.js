const filterOperatorChoices = [
  { label: "", value: "" },
  { label: "Greater Than", value: "$gt" },
  { label: "Greater Than and Equals to", value: "$gte" },
  { label: "Equals to", value: "$eq" },
  { label: "Less Than", value: "$lt" },
  { label: "Less Than and Equals to", value: "$lte" },
  { label: "Not Equals to", value: "$ne" },
];

const stringOperatorChoices = [
  { label: "", value: "" },
  { label: "Equals to", value: "$eq" },
  { label: "Not Equals to", value: "$ne" },
  { label: "Contain", value: "regex" },
  { label: "Not Contain", value: "notregex" },
  { label: "In", value: "$in" },
  { label: "Not in", value: "$nin" },
  { label: "All", value: "$all" },
];

const allFeaturesDataList = [
  "pageIndexStatus",
  "GSC",
  "syncOtherImage",
  "metaBulkOperation",
  "collection",
  "imageAutomation",
  "metaAutomation",
  "removeDuplicateSchema",
  "removeErrorSchema",
  "productReviewSchema",
  "brokenLinkAutomation",
  "removeSiteMapSwitch",
  "htmlSitemap",
  "otherImageOptimization",
  "homePageImage",
  "googleIndexStatus",
  "videoSchema",
  "faqSchema",
  "recipeSchema",
  "aiBlog",
  "breadcrumbDesignSection",
  "breadcrumbMetaObject",
  "videoSchemaSection",
  "faqSchemaSection",
  "keywordAnalysis",
  "duplicateMetaTag",
  "otherImageAutomation",
  "technicalSeo",
  "socialMediaPreview",
  "homePageImageAutomation",
  "priorityAndBlockCollection",
  "fiveLevelBreadcrumb",
];

const allFeaturesStatusList = [
  "productSchema",
  "instantPage",
  "gsc_connnect",
  "localBusinessSchemaSetting",
  "productSchemaSetting",
  "breadcrumbDesign",
  "productSchemaSchemaSetting",
  "brokenLinksEnableDate",
  "recipe",
  "productReview",
  "localBusiness",
  "productMerchantSchemaSetting",
  "recurringPlanId",
  "removeDuplicateScript",
  "product",
  "undefined",
  "brokenLinks",
  "howTo",
  "recurringPlanName",
  "productReviewSchemaSetting",
  "organization",
  "breadcrumb",
  "video",
  "search",
  "blog",
  "automation",
  "ws_seo_json_pro",
  "metaTagAutomation",
  "organizationSchemaSetting",
  "collection",
  "imageAutomation",
  "articleSchemaSetting",
  "removeScript",
  "ws_seo_json_premium",
  "productMerchant",
  "google_page_speed",
  "article",
  "productFAQ",
  "logoSchemaSetting",
  "brokenLinkAutomation",
];

const featureDataOptions = allFeaturesDataList
  .sort((a, b) => a.localeCompare(b))
  .map((e, index) => ({ label: e, value: e, key: index }));

const featureStatusOptions = allFeaturesStatusList
  .sort((a, b) => a.localeCompare(b))
  .map((e, index) => ({ label: e, value: e, key: index }));

const stringFields = (field, type, choiceArray) => {
  if (type === "string" && choiceArray?.length > 0) {
    return [
      {
        id: type,
        name: type,
        label: type,
        type: "select",
        options: choiceArray?.map((e, index) => ({ label: e, value: e, key: index })),
        dependOn: {
          name: `${field}.operators`,
          value: ["$eq", "$ne"],
          type: "hidden",
        },
      },
      {
        id: type,
        name: type,
        label: type,
        type: type,
        dependOn: {
          name: `${field}.operators`,
          value: ["", "regex", "notregex"],
          type: "hidden",
        },
      },
    ];
  }
  return [
    {
      id: type,
      name: type,
      label: type,
      type: type,
      min: 0,
      dependOn: type === "string" && {
        name: `${field}.operators`,
        value: ["$eq", "$ne", "regex", "notregex"],
        type: "hidden",
      },
    },
  ];
};

const compareFormField = (field, type, label, choiceArray = []) => {
  const operatorChoices = type === "string" ? stringOperatorChoices : filterOperatorChoices;
  return {
    key: field,
    label: label || field,
    formFields: [
      {
        id: field,
        name: field,
        label: label || field,
        nested: "object",
        groupSize: 1,
        section: false,
        subfields: [
          {
            id: "operators",
            name: "operators",
            label: "Operators",
            type: "select",
            options: operatorChoices,
            onChange: (value, form) => {
              const operatorValue = form?.values?.[field]?.[type];
              form.setFieldValue(`${field}.operators`, value);
              const arrayElement = ["$in", "$nin", "$all"];
              if (arrayElement?.includes(value) && !Array.isArray(operatorValue)) {
                form.setFieldValue(`${field}.${type}`, []);
              } else if (!arrayElement?.includes(value) && Array.isArray(operatorValue)) {
                form.setFieldValue(`${field}.${type}`, "");
              }
            },
          },
          ...stringFields(field, type, choiceArray),
          {
            id: type,
            name: type,
            label: type,
            type: "choiceList",
            allowMultiple: true,
            choices: choiceArray?.map((e, index) => ({ label: e, value: e, key: index })),
            dependOn: {
              name: `${field}.operators`,
              value: ["$in", "$nin", "$all"],
              type: "hidden",
            },
          },
        ],
      },
    ],
    filterType: type,
  };
};

const makeChoiceField = (field, nestedKey, label) => {
  const key = nestedKey ? { nestedKey } : {};
  return {
    key: field,
    label: label || field,
    formFields: [
      {
        id: field,
        name: field,
        label: field,
        type: "choiceList",
        choices: [
          { label: "true", value: true },
          { label: "false", value: false },
        ],
      },
    ],
    initialValue: [],
    filterType: "array",
    ...key,
  };
};

const featureStatusField = (field, nestedKey, label, options) => {
  const key = nestedKey ? { nestedKey } : {};
  return {
    key: field,
    label: label || field,
    formFields: [
      {
        id: field,
        name: field,
        label: field,
        type: "choiceList",
        allowMultiple: true,
        choices: options,
      },
    ],
    initialValue: [],
    filterType: "checkTrueInObject",
    ...key,
  };
};

const plan_display_name = [
  "",
  "Advanced",
  "Advanced Shopify",
  "Basic",
  "Basic Shopify",
  "Cancelled",
  "Custom",
  "Developer Preview",
  "Development",
  "Extended Trial",
  "Frozen",
  "Grow",
  "NPO Full",
  "NPO Lite",
  "Open Learning",
  "Pause and Build",
  "Plus Trial",
  "Retail",
  "Sales Training",
  "Shopify",
  "Shopify Alumni",
  "Shopify Plus",
  "Shopify Starter",
  "Staff",
  "Staff Business",
  "Trial",
  "cancelled",
  "frozen",
  "staff",
  "staff_business",
  "trial",
];

const plan_name = [
  "",
  "affiliate",
  "basic",
  "cancelled",
  "custom",
  "dormant",
  "fraudulent",
  "frozen",
  "npo_full",
  "npo_lite",
  "open_learning",
  "paid_trial",
  "partner_test",
  "professional",
  "retail",
  "sales_training",
  "shopify_alumni",
  "shopify_plus",
  "staff",
  "staff_business",
  "starter_2022",
  "trial",
  "unlimited",
];

const recurringPlanName = [
  "",
  "Elite",
  "Elite Yearly",
  "Explorer",
  "Free",
  "Premium",
  "Premium Lifetime",
  "Premium Yearly",
  "Pro",
  "Pro Yearly",
  "Ultimate",
  "Ultimate Yearly",
];

const country_code = [
  "",
  "AD",
  "AE",
  "AL",
  "AM",
  "AR",
  "AT",
  "AU",
  "AW",
  "BA",
  "BB",
  "BD",
  "BE",
  "BG",
  "BH",
  "BM",
  "BR",
  "BS",
  "BY",
  "CA",
  "CH",
  "CL",
  "CM",
  "CN",
  "CO",
  "CR",
  "CW",
  "CY",
  "CZ",
  "DE",
  "DK",
  "DO",
  "DZ",
  "EC",
  "EE",
  "EG",
  "ES",
  "FI",
  "FO",
  "FR",
  "GB",
  "GE",
  "GF",
  "GG",
  "GH",
  "GI",
  "GR",
  "GT",
  "HK",
  "HN",
  "HR",
  "HT",
  "HU",
  "ID",
  "IE",
  "IL",
  "IN",
  "IS",
  "IT",
  "JM",
  "JO",
  "JP",
  "KE",
  "KG",
  "KH",
  "KM",
  "KR",
  "KW",
  "LB",
  "LC",
  "LK",
  "LT",
  "LU",
  "LV",
  "MA",
  "MD",
  "MF",
  "MK",
  "MO",
  "MQ",
  "MT",
  "MU",
  "MX",
  "MY",
  "MZ",
  "NA",
  "NC",
  "NG",
  "NL",
  "NO",
  "NP",
  "NZ",
  "OM",
  "PA",
  "PE",
  "PH",
  "PK",
  "PL",
  "PS",
  "PT",
  "PY",
  "QA",
  "RE",
  "RO",
  "RS",
  "RU",
  "SA",
  "SC",
  "SE",
  "SG",
  "SI",
  "SK",
  "SN",
  "TG",
  "TH",
  "TJ",
  "TN",
  "TR",
  "TT",
  "TW",
  "UA",
  "UG",
  "US",
  "VN",
  "XK",
  "YE",
  "ZA",
  "ZW",
];

const country_name = [
  "",
  "Albania",
  "Algeria",
  "Andorra",
  "Argentina",
  "Armenia",
  "Aruba",
  "Australia",
  "Austria",
  "Bahamas",
  "Bahrain",
  "Bangladesh",
  "Barbados",
  "Belarus",
  "Belgium",
  "Bermuda",
  "Bosnia And Herzegovina",
  "Brazil",
  "Bulgaria",
  "Cambodia",
  "Canada",
  "Chile",
  "China",
  "Colombia",
  "Comoros",
  "Costa Rica",
  "Croatia",
  "CuraÃ§ao",
  "Cyprus",
  "Czech Republic",
  "Denmark",
  "Dominican Republic",
  "Ecuador",
  "Egypt",
  "Estonia",
  "Faroe Islands",
  "Finland",
  "France",
  "French Guiana",
  "Georgia",
  "Germany",
  "Ghana",
  "Gibraltar",
  "Greece",
  "Guatemala",
  "Guernsey",
  "Haiti",
  "Honduras",
  "Hong Kong",
  "Hungary",
  "Iceland",
  "India",
  "Indonesia",
  "Ireland",
  "Israel",
  "Italy",
  "Jamaica",
  "Japan",
  "Jordan",
  "Kenya",
  "Kosovo",
  "Kuwait",
  "Kyrgyzstan",
  "Latvia",
  "Lebanon",
  "Lithuania",
  "Luxembourg",
  "Macao",
  "Malaysia",
  "Malta",
  "Martinique",
  "Mauritius",
  "Mexico",
  "Moldova, Republic of",
  "Morocco",
  "Mozambique",
  "Namibia",
  "Nepal",
  "Netherlands",
  "New Caledonia",
  "New Zealand",
  "Nigeria",
  "North Macedonia",
  "Norway",
  "Oman",
  "Pakistan",
  "Palestinian Territory, Occupied",
  "Panama",
  "Paraguay",
  "Peru",
  "Philippines",
  "Poland",
  "Portugal",
  "Qatar",
  "Republic of Cameroon",
  "Reunion",
  "Romania",
  "Russia",
  "Saint Lucia",
  "Saint Martin",
  "Saudi Arabia",
  "Senegal",
  "Serbia",
  "Seychelles",
  "Singapore",
  "Slovakia",
  "Slovenia",
  "South Africa",
  "South Korea",
  "Spain",
  "Sri Lanka",
  "Sweden",
  "Switzerland",
  "Taiwan",
  "Tajikistan",
  "Thailand",
  "Togo",
  "Trinidad and Tobago",
  "Tunisia",
  "Turkey",
  "Uganda",
  "Ukraine",
  "United Arab Emirates",
  "United Kingdom",
  "United States",
  "Vietnam",
  "Yemen",
  "Zimbabwe",
];

const currency = [
  "",
  "AED",
  "ALL",
  "AMD",
  "ANG",
  "ARS",
  "AUD",
  "BBD",
  "BDT",
  "BGN",
  "BHD",
  "BRL",
  "CAD",
  "CHF",
  "CLP",
  "CNY",
  "COP",
  "CRC",
  "CZK",
  "DKK",
  "DOP",
  "DZD",
  "EGP",
  "EUR",
  "GBP",
  "GEL",
  "GHS",
  "GTQ",
  "HKD",
  "HNL",
  "HRK",
  "HUF",
  "IDR",
  "ILS",
  "INR",
  "ISK",
  "JMD",
  "JOD",
  "JPY",
  "KES",
  "KGS",
  "KRW",
  "KWD",
  "LBP",
  "LKR",
  "MAD",
  "MDL",
  "MUR",
  "MXN",
  "MYR",
  "NAD",
  "NGN",
  "NOK",
  "NPR",
  "NZD",
  "OMR",
  "PAB",
  "PEN",
  "PHP",
  "PKR",
  "PLN",
  "PYG",
  "QAR",
  "RON",
  "RSD",
  "RUB",
  "SAR",
  "SEK",
  "SGD",
  "THB",
  "TND",
  "TRY",
  "TTD",
  "TWD",
  "UAH",
  "UGX",
  "USD",
  "VND",
  "XOF",
  "XPF",
  "YER",
  "ZAR",
];

const recurringPlanType = ["", "Free", "Paid"];

export const getFilterField = () => {
  return [
    compareFormField("idealCustomerRate", "number", "Ideal Customer Rate"),
    compareFormField("plan_display_name", "string", "Shopify Plan Name", plan_display_name),
    compareFormField("plan_name", "string", "Shopify Plan Id", plan_name),
    compareFormField("recurringPlanName", "string", "Our app plan name", recurringPlanName),
    compareFormField("recurringPlanType", "string", "Recurring Plan Type", recurringPlanType),
    makeChoiceField("Installed By owner", "associated_user.account_owner"),
    compareFormField("lastLogin", "date", "Last Login Date"),
    compareFormField("created_at", "date", "Shop_age"),
    compareFormField("created", "date", "Installed date"),
    featureStatusField("Check Feature Data Wise", "featureData", "Check Feature Data Wise", featureDataOptions),
    featureStatusField(
      "Check Feature Status Wise",
      "featureStatus",
      "Check Feature Status Wise",
      featureStatusOptions
    ),
    makeChoiceField("User Come From Email", "emailInfo.isComeFromEmail"),
    makeChoiceField("Give Free Trial From Email", "alreadyGiveFreeTrial"),
    compareFormField("country_code", "string", "Country Code", country_code),
    compareFormField("country_name", "string", "Country Name", country_name),
    compareFormField("currency", "string", "Currency", currency),
    compareFormField("productCount", "number", "Product Count"),
    compareFormField("stepCount", "number", "Onboarding Step"),
    compareFormField("trial_days", "number", "Trial Days"),
    compareFormField("offerTrialDays", "number", "Offer Trial Days"),
    compareFormField("trial_start", "date", "Trial Start Date"),
    makeChoiceField("isOnBoardingDone"),
    makeChoiceField("reviewRequest", "reviewRequest.isReviewPosted"),
  ];
};

export const excludeFields = [
  "_id",
  "shopUrl",
  "__v",
  "accessToken",
  "storeName",
  "storeId",
  "email",
  "phone",
  "shop_owner",
  "role",
  "domain",
  "customer_email",
  "googleAuthTokens",
  "created",
  // "created_at",
  "updated",
  "scope",
  "privateUserMetafield",
  "privateMetafield",
  "metafield",
];
